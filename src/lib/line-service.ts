import { Client, Message } from '@line/bot-sdk';
import { DatabaseService } from './database';
import { Category } from '@/types';
import { CatApiService } from './cat-api';
import { FortuneService } from './fortune-service';

const lineConfig = {
  channelAccessToken: process.env.LINE_CHANNEL_ACCESS_TOKEN!,
  channelSecret: process.env.LINE_CHANNEL_SECRET!,
};

const client = new Client(lineConfig);

export class LineService {
  static async handleMessage(userMessage: string, userId: string, displayName?: string) {
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    const user = await DatabaseService.createUser(userId, displayName);
    
    // ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
    const response = await this.processUserMessage(userMessage, user.id);
    
    return response;
  }

  static async processUserMessage(message: string, userId: string): Promise<Message[]> {
    const text = message.trim().toLowerCase();

    // ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà Phase 1: ‡πÅ‡∏°‡∏ß‡∏ü‡∏£‡∏µ (‡∏£‡∏π‡∏õ‡πÅ‡∏°‡∏ß‡∏™‡∏∏‡πà‡∏°)
    if (text === '‡πÅ‡∏°‡∏ß‡∏ü‡∏£‡∏µ' || text === '‡∏£‡∏π‡∏õ‡πÅ‡∏°‡∏ß' || text === '‡πÅ‡∏°‡∏ß' || text === 'cat') {
      return await this.getCatImageMessage();
    }

    // ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà Phase 1: ‡πÅ‡∏°‡∏ß‡πÄ‡∏•‡∏µ‡∏¢ (‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ‡πÅ‡∏°‡∏ß)
    if (text === '‡πÅ‡∏°‡∏ß‡πÄ‡∏•‡∏µ‡∏¢' || text === '‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ' || text === '‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢' || text === 'fortune' || text === '‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢') {
      return this.getFortuneMessage();
    }

    // ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏û‡∏¥‡πÄ‡∏®‡∏©: ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô
    if (text === '‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô' || text === '‡πÇ‡∏ä‡∏Ñ‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô' || text === '‡∏î‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô') {
      return this.getFinancialFortuneMessage();
    }

    // ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏î‡∏π‡∏™‡∏£‡∏∏‡∏õ
    if (text === '‡∏™‡∏£‡∏∏‡∏õ' || text === 'summary') {
      return await this.getSummaryMessage(userId);
    }

    // ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏î‡∏π‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
    if (text === '‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà' || text === 'categories') {
      return await this.getCategoriesMessage(userId);
    }

    // ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏î‡∏π‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì
    if (text === '‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì' || text === 'budget') {
      return await this.getBudgetMessage(userId);
    }

    // ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠
    if (text === 'help' || text === '‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠' || text === '‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ') {
      return this.getHelpMessage();
    }

    // ‡∏•‡∏≠‡∏á‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö-‡∏à‡πà‡∏≤‡∏¢
    const transaction = this.parseTransactionMessage(message);
    if (transaction) {
      try {
        // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
        const categories = await DatabaseService.getUserCategories(userId);
        const category = this.findBestCategory(transaction.description || '', categories);

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
        await DatabaseService.createTransaction(
          userId,
          transaction.amount,
          transaction.description,
          category?.id
        );

        return [{
          type: 'text',
          text: `‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\nüí∞ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${transaction.amount.toLocaleString()} ‡∏ö‡∏≤‡∏ó\nüìù ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ${transaction.description}\nüìÇ ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà: ${category?.name || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'}`
        }];
      } catch (error) {
        console.error('Error saving transaction:', error);
        return [{
          type: 'text',
          text: '‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á'
        }];
      }
    }

    // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢ ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏¢‡πÄ‡∏•‡πà‡∏ô
    const casualResponse = this.getCasualResponse(text);
    if (casualResponse) {
      return casualResponse;
    }

    // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à
    return [{
      type: 'text',
      text: 'ü§î ‡∏ü‡∏π‡∏Å‡∏∏‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏¢\n\nüí° ‡∏•‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå:\n‚Ä¢ "‡πÅ‡∏°‡∏ß‡∏ü‡∏£‡∏µ" - ‡∏î‡∏π‡∏£‡∏π‡∏õ‡πÅ‡∏°‡∏ß‡∏™‡∏∏‡πà‡∏° üê±\n‚Ä¢ "‡πÅ‡∏°‡∏ß‡πÄ‡∏•‡∏µ‡∏¢" - ‡∏Ç‡∏≠‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢ üîÆ\n‚Ä¢ "50 ‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡πÅ‡∏ü" - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ üí∞\n‚Ä¢ "‡∏™‡∏£‡∏∏‡∏õ" - ‡∏î‡∏π‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô üìä\n‚Ä¢ "‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠" - ‡∏î‡∏π‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î üìù\n\n‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏•‡∏≠‡∏á‡∏Ñ‡∏∏‡∏¢‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏±‡∏ö‡∏ü‡∏π‡∏Å‡∏∏‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏ô‡∏∞! üò∏'
    }];
  }

  static parseTransactionMessage(message: string): { amount: number; description: string } | null {
    // ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏ä‡πà‡∏ô:
    // "50 ‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡πÅ‡∏ü", "‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡πÅ‡∏ü 50", "50", "100 ‡∏ö‡∏≤‡∏ó ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏¢‡πá‡∏ô"
    
    const patterns = [
      /^(\d+(?:\.\d+)?)\s*‡∏ö‡∏≤‡∏ó?\s*(.*)$/i,      // "50 ‡∏ö‡∏≤‡∏ó ‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡πÅ‡∏ü"
      /^(.+?)\s+(\d+(?:\.\d+)?)\s*‡∏ö‡∏≤‡∏ó?$/i,     // "‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡πÅ‡∏ü 50 ‡∏ö‡∏≤‡∏ó"
      /^(\d+(?:\.\d+)?)\s+(.+)$/,              // "50 ‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡πÅ‡∏ü"
      /^(.+?)\s+(\d+(?:\.\d+)?)$/,             // "‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡πÅ‡∏ü 50"
      /^(\d+(?:\.\d+)?)\s*$/                   // "50"
    ];

    for (const pattern of patterns) {
      const match = message.trim().match(pattern);
      if (match) {
        if (pattern.source.startsWith('^(\\d+')) {
          // ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
          const amount = parseFloat(match[1]);
          const description = match[2]?.trim() || '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
          return { amount, description };
        } else {
          // ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
          const description = match[1].trim();
          const amount = parseFloat(match[2]);
          return { amount, description };
        }
      }
    }

    return null;
  }

  static findBestCategory(description: string, categories: Category[]) {
    const desc = description.toLowerCase();
    
    // ‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ï‡πà‡∏≤‡∏á‡πÜ
    const categoryKeywords = {
      '‡∏≠‡∏≤‡∏´‡∏≤‡∏£': ['‡∏≠‡∏≤‡∏´‡∏≤‡∏£', '‡∏Å‡∏≤‡πÅ‡∏ü', '‡∏Ç‡πâ‡∏≤‡∏ß', '‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡∏ô', '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°', '‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£', '‡∏ü‡∏π‡πâ‡∏î'],
      '‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á': ['‡∏£‡∏ñ', '‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà', '‡πÄ‡∏ö‡∏ô‡∏ã‡∏¥‡∏ô', '‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô', '‡∏£‡∏ñ‡πÄ‡∏°‡∏•‡πå', '‡∏£‡∏ñ‡πÑ‡∏ü', '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏¥‡∏ô', 'grab'],
      '‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ö‡πâ‡∏≤‡∏ô': ['‡πÑ‡∏ü', '‡∏ô‡πâ‡∏≥', '‡πÄ‡∏ô‡πá‡∏ï', '‡∏Ñ‡πà‡∏≤‡∏ö‡πâ‡∏≤‡∏ô', '‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü', '‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥', '‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤'],
      '‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á': ['‡∏ã‡∏∑‡πâ‡∏≠', '‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤', '‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤', '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏≠‡∏≤‡∏á', '‡∏ä‡πâ‡∏≠‡∏õ'],
      '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á': ['‡∏´‡∏ô‡∏±‡∏á', '‡πÄ‡∏Å‡∏°', '‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ï', '‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß', '‡∏ö‡∏±‡∏ô‡πÄ‡∏ó‡∏¥‡∏á']
    };

    for (const category of categories) {
      if (category.type === 'expense') {
        const keywords = categoryKeywords[category.name as keyof typeof categoryKeywords];
        if (keywords && keywords.some(keyword => desc.includes(keyword))) {
          return category;
        }
      }
    }

    // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà "‡∏≠‡∏∑‡πà‡∏ô‡πÜ" ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢
    return categories.find(c => c.name === '‡∏≠‡∏∑‡πà‡∏ô‡πÜ' && c.type === 'expense');
  }

  static async getSummaryMessage(userId: string): Promise<Message[]> {
    const now = new Date();
    const summary = await DatabaseService.getMonthlySummary(userId, now.getFullYear(), now.getMonth() + 1);

    const text = `üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ${now.getMonth() + 1}/${now.getFullYear()}\n\n` +
      `üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö: ${summary.total_income.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n` +
      `üí∏ ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢: ${summary.total_expense.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n` +
      `üíµ ‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${summary.net_amount.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n\n` +
      `üì± ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ó‡∏µ‡πà ${process.env.APP_URL}/dashboard`;

    return [{ type: 'text', text }];
  }

  static async getCategoriesMessage(userId: string): Promise<Message[]> {
    const categories = await DatabaseService.getUserCategories(userId);
    
    const incomeCategories = categories.filter(c => c.type === 'income');
    const expenseCategories = categories.filter(c => c.type === 'expense');

    let text = 'üìÇ ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì\n\n';
    
    if (incomeCategories.length > 0) {
      text += 'üí∞ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö:\n';
      incomeCategories.forEach(cat => {
        text += `‚Ä¢ ${cat.name}\n`;
      });
      text += '\n';
    }

    if (expenseCategories.length > 0) {
      text += 'üí∏ ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢:\n';
      expenseCategories.forEach(cat => {
        text += `‚Ä¢ ${cat.name}`;
        if (cat.budget_amount) {
          text += ` (‡∏á‡∏ö: ${cat.budget_amount.toLocaleString()})`;
        }
        text += '\n';
      });
    }

    text += `\nüì± ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà ${process.env.APP_URL}/dashboard`;

    return [{ type: 'text', text }];
  }

  static async getBudgetMessage(userId: string): Promise<Message[]> {
    const now = new Date();
    const budgetStatus = await DatabaseService.getBudgetStatus(userId, now.getFullYear(), now.getMonth() + 1);

    if (budgetStatus.length === 0) {
      return [{
        type: 'text',
        text: 'üìä ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì\n\nüì± ‡∏ï‡∏±‡πâ‡∏á‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ó‡∏µ‡πà ${process.env.APP_URL}/dashboard'
      }];
    }

    let text = `üìä ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ${now.getMonth() + 1}/${now.getFullYear()}\n\n`;

    budgetStatus.forEach(budget => {
      const percentage = Math.round(budget.percentage_used);
      const status = percentage > 100 ? 'üî¥' : percentage > 80 ? 'üü°' : 'üü¢';
      
      text += `${status} ${budget.category_name}\n`;
      text += `   ‡πÉ‡∏ä‡πâ: ${budget.spent_amount.toLocaleString()}/${budget.budget_amount.toLocaleString()} ‡∏ö‡∏≤‡∏ó (${percentage}%)\n`;
      text += `   ‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${budget.remaining_amount.toLocaleString()} ‡∏ö‡∏≤‡∏ó\n\n`;
    });

    text += `üì± ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏µ‡πà ${process.env.APP_URL}/dashboard`;

    return [{ type: 'text', text }];
  }

  static getHelpMessage(): Message[] {
    return [{
      type: 'text',
      text: `ü§ñ Fuku Neko - ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß\n\n` +
        `üé™ ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏™‡∏ô‡∏∏‡∏Å‡πÜ:\n` +
        `‚Ä¢ "‡πÅ‡∏°‡∏ß‡∏ü‡∏£‡∏µ" - ‡∏£‡∏π‡∏õ‡πÅ‡∏°‡∏ß‡∏™‡∏∏‡πà‡∏° ÔøΩ\n` +
        `‚Ä¢ "‡πÅ‡∏°‡∏ß‡πÄ‡∏•‡∏µ‡∏¢" - ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢ üîÆ\n` +
        `‚Ä¢ "‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô" - ‡∏î‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô üí∞\n\n` +
        `üìù ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:\n` +
        `‚Ä¢ "50 ‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡πÅ‡∏ü"\n` +
        `‚Ä¢ "‡∏Ñ‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£ 120"\n` +
        `‚Ä¢ "500 ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô"\n\n` +
        `üìä ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:\n` +
        `‚Ä¢ "‡∏™‡∏£‡∏∏‡∏õ" - ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô\n` +
        `‚Ä¢ "‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà" - ‡∏î‡∏π‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà\n` +
        `‚Ä¢ "‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì" - ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏ö\n\n` +
        `üì± ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á:\n` +
        `${process.env.APP_URL}/dashboard\n\n` +
        `üíé ‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏õ‡πá‡∏ô Premium:\n` +
        `‚Ä¢ ‡∏≠‡πà‡∏≤‡∏ô‡∏™‡∏•‡∏¥‡∏õ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥\n` +
        `‚Ä¢ ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á\n` +
        `‚Ä¢ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤`
    }];
  }

  /**
   * ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà: ‡πÅ‡∏°‡∏ß‡∏ü‡∏£‡∏µ (‡∏£‡∏π‡∏õ‡πÅ‡∏°‡∏ß‡∏™‡∏∏‡πà‡∏°)
   */
  static async getCatImageMessage(): Promise<Message[]> {
    try {
      const catImageUrl = await CatApiService.getCatImageWithFallback();
      
      return [
        {
          type: 'text',
          text: 'üê± ‡πÅ‡∏°‡∏ß‡∏ü‡∏£‡∏µ‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß! ‡∏£‡∏π‡∏õ‡πÅ‡∏°‡∏ß‡∏™‡∏∏‡πà‡∏°‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì ‚ú®'
        },
        {
          type: 'image',
          originalContentUrl: catImageUrl,
          previewImageUrl: catImageUrl
        },
        {
          type: 'text',
          text: '‡∏´‡∏ß‡∏±‡∏á‡∏ß‡πà‡∏≤‡πÅ‡∏°‡∏ß‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏¥‡πâ‡∏°‡πÑ‡∏î‡πâ‡∏ô‡∏∞! üò∏\n\n‡∏û‡∏¥‡∏°‡∏û‡πå "‡πÅ‡∏°‡∏ß‡∏ü‡∏£‡∏µ" ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÅ‡∏°‡∏ß‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏°‡πà üé™'
        }
      ];
    } catch (error) {
      console.error('Error getting cat image:', error);
      return [{
        type: 'text',
        text: 'üòø ‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏ô‡∏∞ ‡πÅ‡∏°‡∏ß‡∏´‡∏ô‡∏µ‡πÑ‡∏õ‡πÄ‡∏•‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏∑‡πà‡∏ô ‡∏•‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå "‡πÅ‡∏°‡∏ß‡∏ü‡∏£‡∏µ" ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏î‡∏π‡∏ô‡∏∞!'
      }];
    }
  }

  /**
   * ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà: ‡πÅ‡∏°‡∏ß‡πÄ‡∏•‡∏µ‡∏¢ (‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ‡πÅ‡∏°‡∏ß)
   */
  static getFortuneMessage(): Message[] {
    const fortune = FortuneService.getRandomFortune();
    
    return [{
      type: 'text',
      text: fortune + '\n\nüí´ ‡∏û‡∏¥‡∏°‡∏û‡πå "‡πÅ‡∏°‡∏ß‡πÄ‡∏•‡∏µ‡∏¢" ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà ‡∏´‡∏£‡∏∑‡∏≠ "‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏î‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞!'
    }];
  }

  /**
   * ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏û‡∏¥‡πÄ‡∏®‡∏©: ‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô
   */
  static getFinancialFortuneMessage(): Message[] {
    const fortune = FortuneService.getFinancialFortune();
    
    return [{
      type: 'text',
      text: fortune + '\n\nüìä ‡∏≠‡∏¢‡∏≤‡∏Å‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏´‡∏°? ‡∏û‡∏¥‡∏°‡∏û‡πå "‡∏™‡∏£‡∏∏‡∏õ" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏¢‡∏≠‡∏î‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ!'
    }];
  }

  /**
   * ‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏∏‡∏¢‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏ü‡∏π‡∏Å‡∏∏
   */
  static getCasualResponse(text: string): Message[] | null {
    // ‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢
    if (/^(‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ|‡∏´‡∏ß‡∏±‡∏î‡∏î‡∏µ|‡∏î‡∏µ|hello|hi|‡πÄ‡∏Æ‡πâ|‡πÄ‡∏Æ‡∏¢)/.test(text)) {
      const greetings = [
        'üò∏ ‡∏ô‡∏µ‡πà‡∏ü‡∏π‡∏Å‡∏∏‡πÄ‡∏≠‡∏á! ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™~',
        'üê± ‡∏´‡∏ß‡∏±‡∏î‡∏î‡∏µ‡∏Ñ‡πà‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™! ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏ü‡∏π‡∏Å‡∏∏‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏∞‡πÑ‡∏£‡∏î‡∏µ?',
        'üòä ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏à‡πâ‡∏≤! ‡∏ü‡∏π‡∏Å‡∏∏‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡πÅ‡∏•‡πâ‡∏ß!',
        'üåü ‡πÄ‡∏Æ‡πâ‡πÇ‡∏•‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™! ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏™‡∏ô‡∏∏‡∏Å‡πÜ ‡∏ö‡πâ‡∏≤‡∏á‡∏°‡∏±‡πâ‡∏¢?'
      ];
      return [{ type: 'text', text: greetings[Math.floor(Math.random() * greetings.length)] }];
    }

    // ‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ
    if (/^(‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏á|‡∏¢‡∏±‡∏á‡πÑ‡∏á|‡∏™‡∏ö‡∏≤‡∏¢‡∏î‡∏µ|‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô|‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£)/.test(text)) {
      const responses = [
        'üò∏ ‡∏ü‡∏π‡∏Å‡∏∏‡∏™‡∏ö‡∏≤‡∏¢‡∏î‡∏µ‡∏Ñ‡πà‡∏∞! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏¥‡∏î‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏•‡∏¢',
        'üêæ ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏ü‡∏π‡∏Å‡∏∏‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡πà‡∏∞! ‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏á‡∏ö‡πâ‡∏≤‡∏á?',
        'üí∞ ‡∏ü‡∏π‡∏Å‡∏∏‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ô‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏•‡∏¢! ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏õ‡∏ö‡πâ‡∏≤‡∏á‡∏°‡∏±‡πâ‡∏¢?',
        'üò∫ ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ‡∏£‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏Ñ‡πà‡∏∞! ‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà‡∏°‡∏≤‡∏ö‡∏≠‡∏Å‡∏ü‡∏π‡∏Å‡∏∏‡∏°‡∏±‡πâ‡∏¢?'
      ];
      return [{ type: 'text', text: responses[Math.floor(Math.random() * responses.length)] }];
    }

    // ‡∏ä‡∏∑‡πà‡∏ô‡∏ä‡∏°
    if (/^(‡πÄ‡∏Å‡πà‡∏á|‡∏î‡∏µ|‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°|‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î|‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì|‡∏Ç‡∏≠‡∏ö‡πÉ‡∏à|thank|good|great|nice)/.test(text)) {
      const responses = [
        'üò∏ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏Ñ‡πà‡∏∞! ‡∏ü‡∏π‡∏Å‡∏∏‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ',
        'üê± ‡πÄ‡∏´‡∏°‡∏µ‡∏¢‡∏ß~ ‡∏ä‡∏∑‡πà‡∏ô‡πÉ‡∏à‡∏à‡∏±‡∏á! ‡∏ü‡∏π‡∏Å‡∏∏‡∏à‡∏∞‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î',
        'üòª ‡∏ü‡∏π‡∏Å‡∏∏‡∏î‡∏µ‡πÉ‡∏à‡∏ó‡∏µ‡πà‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏û‡∏≠‡πÉ‡∏à‡∏Ñ‡πà‡∏∞! ‡∏°‡∏≤‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏∞',
        '‚ú® ‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏Å‡πá‡πÄ‡∏Å‡πà‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏™‡πà‡πÉ‡∏à‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô! ‡∏ü‡∏π‡∏Å‡∏∏‡∏†‡∏π‡∏°‡∏¥‡πÉ‡∏à‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢'
      ];
      return [{ type: 'text', text: responses[Math.floor(Math.random() * responses.length)] }];
    }

    // ‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£
    if (/^(‡∏´‡∏¥‡∏ß|‡∏Å‡∏¥‡∏ô|‡∏≠‡∏≤‡∏´‡∏≤‡∏£|‡∏Ç‡πâ‡∏≤‡∏ß|‡∏≠‡∏¥‡πà‡∏°|‡∏≠‡∏£‡πà‡∏≠‡∏¢|‡∏Å‡∏≤‡πÅ‡∏ü|‡∏ä‡∏≤|‡∏ô‡πâ‡∏≥)/.test(text)) {
      const responses = [
        'üòã ‡∏ü‡∏π‡∏Å‡∏∏‡∏Å‡πá‡∏´‡∏¥‡∏ß‡∏õ‡∏•‡∏≤‡∏ó‡∏π‡∏ô‡πà‡∏≤‡πÄ‡∏•‡∏¢! ‡πÅ‡∏ï‡πà‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏à‡∏î‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞',
        'üçΩÔ∏è ‡∏Å‡∏¥‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏î‡∏µ‡πÜ ‡∏°‡∏±‡πâ‡∏¢? ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏ö‡∏≠‡∏Å‡∏ü‡∏π‡∏Å‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏•‡πà‡∏∞!',
        '‚òï ‡∏ü‡∏π‡∏Å‡∏∏‡∏Ç‡∏≠‡πÅ‡∏ä‡∏£‡πå‡∏Å‡∏≤‡πÅ‡∏ü‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏™‡∏¥! üò∏ ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏°‡∏≤‡∏ö‡∏≠‡∏Å‡∏ü‡∏π‡∏Å‡∏∏‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢',
        'üêü ‡∏ü‡∏π‡∏Å‡∏∏‡∏≠‡∏¢‡∏≤‡∏Å‡∏Å‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏à‡∏±‡∏á! ‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏Å‡∏¥‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏≤‡πÅ‡∏ä‡∏£‡πå‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Å‡∏±‡∏ö‡∏ü‡∏π‡∏Å‡∏∏‡∏™‡∏¥'
      ];
      return [{ type: 'text', text: responses[Math.floor(Math.random() * responses.length)] }];
    }

    // ‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå
    if (/^(‡πÄ‡∏®‡∏£‡πâ‡∏≤|‡πÄ‡∏™‡∏µ‡∏¢‡πÉ‡∏à|‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î|‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢|‡∏á‡∏≤‡∏ô‡πÄ‡∏¢‡∏≠‡∏∞|‡∏õ‡∏ß‡∏î‡∏´‡∏±‡∏ß|‡πÑ‡∏°‡πà‡∏™‡∏ö‡∏≤‡∏¢)/.test(text)) {
      const responses = [
        'üòø ‡∏≠‡πã‡∏≠ ‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏´‡∏£‡∏≠? ‡∏ü‡∏π‡∏Å‡∏∏‡∏≠‡∏¢‡∏≤‡∏Å‡∏õ‡∏•‡∏≠‡∏ö‡πÉ‡∏à... ‡∏°‡∏≤‡∏î‡∏π‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞ ‡∏î‡∏π‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô!',
        'ü´Ç ‡∏ü‡∏π‡∏Å‡∏∏‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™... ‡∏ß‡∏±‡∏ô‡∏¢‡∏≤‡∏Å‡πÜ ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏î‡∏π‡πÅ‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞ ‡∏ü‡∏π‡∏Å‡∏∏‡∏Ñ‡∏≠‡∏¢‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏´‡πâ',
        'üíô ‡πÉ‡∏à‡πÄ‡∏¢‡πá‡∏ô‡πÜ ‡∏ô‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™ ‡∏ü‡∏π‡∏Å‡∏∏‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ! ‡∏°‡∏≤‡∏î‡∏π‡∏ß‡πà‡∏≤‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô',
        'üåà ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡∏∞‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡∏î‡∏µ‡πÜ ‡∏Ñ‡πà‡∏∞! ‡∏ü‡∏π‡∏Å‡∏∏‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡πÉ‡∏´‡πâ ‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡πÅ‡∏Ñ‡πà‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏Å‡πá‡∏û‡∏≠'
      ];
      return [{ type: 'text', text: responses[Math.floor(Math.random() * responses.length)] }];
    }

    // ‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û
    if (/^(‡∏õ‡πà‡∏ß‡∏¢|‡πÑ‡∏Ç‡πâ|‡πÄ‡∏à‡πá‡∏ö|‡∏´‡∏≤‡∏¢|‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á|‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û|‡∏´‡∏°‡∏≠|‡∏¢‡∏≤|‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•)/.test(text)) {
      const responses = [
        'üè• ‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡πÑ‡∏°‡πà‡∏™‡∏ö‡∏≤‡∏¢‡∏´‡∏£‡∏≠? ‡∏î‡∏π‡πÅ‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏ô‡∏∞! ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏à‡∏î‡∏Ñ‡πà‡∏≤‡∏´‡∏°‡∏≠‡∏Ñ‡πà‡∏≤‡∏¢‡∏≤‡∏î‡πâ‡∏ß‡∏¢',
        'üíä ‡∏´‡∏≤‡∏¢‡πÑ‡∏ß‡πÜ ‡∏ô‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™! ‡∏ü‡∏π‡∏Å‡∏∏‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á... ‡πÅ‡∏•‡∏∞‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÑ‡∏ß‡πâ‡∏î‡πâ‡∏ß‡∏¢',
        '‚ù§Ô∏è‚Äçü©π ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÄ‡∏•‡∏¢! ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡∏ô‡∏∞',
        'üå°Ô∏è ‡∏ü‡∏π‡∏Å‡∏∏‡∏´‡πà‡∏ß‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏à‡∏±‡∏á! ‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠ ‡πÅ‡∏•‡∏∞‡∏ñ‡πâ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏¢‡∏≤‡∏°‡∏≤‡∏ö‡∏≠‡∏Å‡∏ü‡∏π‡∏Å‡∏∏‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞'
      ];
      return [{ type: 'text', text: responses[Math.floor(Math.random() * responses.length)] }];
    }

    // ‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏á‡∏≤‡∏ô
    if (/^(‡∏á‡∏≤‡∏ô|‡∏ó‡∏≥‡∏á‡∏≤‡∏ô|‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®|‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô|‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤|‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô|‡πÇ‡∏ö‡∏ô‡∏±‡∏™|‡∏•‡∏≤‡∏á‡πà‡∏≤‡∏ô|meeting)/.test(text)) {
      const responses = [
        'üíº ‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏á‡∏ö‡πâ‡∏≤‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™? ‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏°‡∏≤‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Å‡∏±‡∏ö‡∏ü‡∏π‡∏Å‡∏∏‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞!',
        'üìä ‡∏´‡∏ô‡∏±‡∏Å‡∏°‡∏±‡πâ‡∏¢‡∏á‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ? ‡∏ü‡∏π‡∏Å‡∏∏‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å',
        'üí∞ ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏≤‡πÄ‡∏á‡∏¥‡∏ô! ‡∏°‡∏≤‡∏ö‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏±‡∏ö‡∏ü‡∏π‡∏Å‡∏∏‡∏™‡∏¥',
        '‚è∞ ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™!'
      ];
      return [{ type: 'text', text: responses[Math.floor(Math.random() * responses.length)] }];
    }

    // ‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á
    if (/^(‡∏ã‡∏∑‡πâ‡∏≠|‡∏ä‡πâ‡∏≠‡∏õ|shopping|‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤|‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤|‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤|‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏≠‡∏≤‡∏á|‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà)/.test(text)) {
      const responses = [
        'üõçÔ∏è ‡∏ã‡∏∑‡πâ‡∏≠‡∏≠‡∏∞‡πÑ‡∏£‡∏°‡∏≤‡∏´‡∏£‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™? ‡∏ü‡∏π‡∏Å‡∏∏‡∏≠‡∏¢‡∏≤‡∏Å‡∏£‡∏π‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡πâ‡∏ß‡∏¢! ‡∏°‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞',
        'üëó ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ä‡πà‡∏°‡∏±‡πâ‡∏¢? ‡∏î‡∏µ‡∏à‡∏±‡∏á! ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏ö‡∏≠‡∏Å‡∏ü‡∏π‡∏Å‡∏∏‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞ ‡∏ü‡∏π‡∏Å‡∏∏‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏î‡πÉ‡∏´‡πâ',
        'üí≥ ‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á‡∏™‡∏ô‡∏∏‡∏Å‡∏°‡∏±‡πâ‡∏¢? ‡πÅ‡∏ï‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏î‡∏π‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏•‡πà‡∏∞ ‡∏ü‡∏π‡∏Å‡∏∏‡∏´‡πà‡∏ß‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™!',
        'üéÅ ‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏™‡∏ß‡∏¢‡∏°‡∏≤‡∏Å! ‡∏°‡∏≤‡∏ö‡∏≠‡∏Å‡∏ü‡∏π‡∏Å‡∏∏‡∏ß‡πà‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏õ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏ö‡πâ‡∏≤‡∏á ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì'
      ];
      return [{ type: 'text', text: responses[Math.floor(Math.random() * responses.length)] }];
    }

    // ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
    if (/^(‡∏ù‡∏ô|‡∏´‡∏ô‡∏≤‡∏ß|‡∏£‡πâ‡∏≠‡∏ô|‡πÅ‡∏î‡∏î|‡πÄ‡∏°‡∏Ü|‡∏≠‡∏≤‡∏Å‡∏≤‡∏®|‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥|‡∏•‡∏°|‡∏û‡∏≤‡∏¢‡∏∏)/.test(text)) {
      const responses = [
        'üå§Ô∏è ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏á‡∏ö‡πâ‡∏≤‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™? ‡∏ñ‡πâ‡∏≤‡∏ù‡∏ô‡∏ï‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡πÅ‡∏ó‡πá‡∏Å‡∏ã‡∏µ‡πà‡∏ô‡∏∞!',
        '‚òî ‡∏ù‡∏ô‡∏ï‡∏Å‡πÉ‡∏´‡∏ç‡πà‡∏´‡∏£‡∏≠? ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏ô‡πâ‡∏≥‡∏ô‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™! ‡∏Ñ‡πà‡∏≤‡∏£‡πà‡∏°‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤‡∏ö‡∏≠‡∏Å‡∏ü‡∏π‡∏Å‡∏∏',
        'üå°Ô∏è ‡∏£‡πâ‡∏≠‡∏ô‡∏°‡∏≤‡∏Å‡∏´‡∏£‡∏≠? ‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡πÄ‡∏¢‡πá‡∏ô‡πÜ ‡∏°‡∏±‡πâ‡∏¢? ‡∏ü‡∏π‡∏Å‡∏∏‡∏≠‡∏¢‡∏≤‡∏Å‡∏ó‡∏£‡∏≤‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢!',
        '‚ùÑÔ∏è ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏´‡∏ô‡∏≤‡∏ß‡∏à‡∏±‡∏á! ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ô‡∏∞ ‡πÅ‡∏•‡∏∞‡∏ñ‡πâ‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡∏≤‡∏ß‡∏°‡∏≤‡∏ö‡∏≠‡∏Å‡∏ü‡∏π‡∏Å‡∏∏‡∏î‡πâ‡∏ß‡∏¢'
      ];
      return [{ type: 'text', text: responses[Math.floor(Math.random() * responses.length)] }];
    }

    // ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
    if (/^(‡∏ß‡πà‡∏≤‡πÑ‡∏á|‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á|‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡∏°‡πà|‡πÄ‡∏•‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á|‡∏°‡∏µ‡∏Ç‡πà‡∏≤‡∏ß)/.test(text)) {
      const responses = [
        'üò∏ ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏•‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ü‡∏π‡∏Å‡∏∏‡∏ü‡∏±‡∏á‡∏°‡∏±‡πâ‡∏¢? ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢!',
        'üêæ ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ü‡∏π‡∏Å‡∏∏‡∏ä‡πà‡∏ß‡∏¢‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô‡∏î‡∏π‡πÅ‡∏•‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß! ‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏°‡∏±‡πâ‡∏¢?',
        'üí≠ ‡∏ü‡∏π‡∏Å‡∏∏‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏°‡∏µ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏µ‡πÜ ‡∏°‡∏≤‡πÄ‡∏•‡πà‡∏≤! ‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏á‡∏ö‡πâ‡∏≤‡∏á?',
        'üìù ‡∏ü‡∏π‡∏Å‡∏∏‡∏≠‡∏¢‡∏≤‡∏Å‡∏ü‡∏±‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™! ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ'
      ];
      return [{ type: 'text', text: responses[Math.floor(Math.random() * responses.length)] }];
    }

    // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ö‡∏ß‡∏Å
    if (/^(‡∏î‡∏µ‡πÉ‡∏à|‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç|‡∏™‡∏ô‡∏∏‡∏Å|happy|‡∏î‡∏µ|‡πÄ‡∏¢‡πâ|‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°|‡πÄ‡∏Æ‡πâ)/.test(text)) {
      const responses = [
        'üòª ‡∏ü‡∏π‡∏Å‡∏∏‡∏î‡∏µ‡πÉ‡∏à‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏•‡∏¢! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏Ñ‡∏∑‡∏≠‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡πÅ‡∏ï‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞!',
        'üéâ ‡πÄ‡∏¢‡πâ! ‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç ‡∏ü‡∏π‡∏Å‡∏∏‡∏Å‡πá‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏ï‡∏≤‡∏°! ‡∏°‡∏≤‡∏â‡∏•‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞',
        '‚ú® ‡∏î‡∏µ‡πÉ‡∏à‡∏à‡∏±‡∏á‡πÄ‡∏•‡∏¢! ‡∏ß‡∏±‡∏ô‡∏î‡∏µ‡πÜ ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏°‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏ö‡∏≠‡∏Å‡∏ü‡∏π‡∏Å‡∏∏‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞',
        'üò∏ ‡πÄ‡∏´‡∏°‡∏µ‡∏¢‡∏ß~ ‡∏ü‡∏π‡∏Å‡∏∏‡∏Å‡πá‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏î‡∏µ‡∏ï‡∏≤‡∏°! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏¢‡∏¥‡πà‡∏á‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡∏ñ‡πâ‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏¢‡∏≠‡∏∞‡∏î‡πâ‡∏ß‡∏¢!'
      ];
      return [{ type: 'text', text: responses[Math.floor(Math.random() * responses.length)] }];
    }

    // ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÑ‡∏´‡∏ô
    return null;
  }

  static async replyMessage(replyToken: string, messages: Message[]) {
    try {
      await client.replyMessage(replyToken, messages);
    } catch (error) {
      console.error('Error replying message:', error);
      throw error;
    }
  }

  static async pushMessage(userId: string, messages: Message[]) {
    try {
      await client.pushMessage(userId, messages);
    } catch (error) {
      console.error('Error pushing message:', error);
      throw error;
    }
  }
}
