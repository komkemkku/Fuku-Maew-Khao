# ЁЯР▒ р╕зр╕┤р╕Шр╕╡р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ LINE Bot р╕нр╕вр╣Ир╕▓р╕Зр╕Зр╣Ир╕▓р╕в

## ЁЯЪА р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕нр╕вр╣Ир╕▓р╕Зр╕гр╕зр╕Фр╣Ар╕гр╣Зр╕з

### 1. р╣Ар╕гр╕┤р╣Ир╕бр╣Бр╕нр╕Ы
```bash
npm run dev
```

### 2. р╕гр╕▒р╕Щр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓
```bash
./setup-line-bot.sh
```

р╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕Ир╕░:
- тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Бр╕нр╕Ыр╕гр╕▒р╕Щр╕нр╕вр╕╣р╣И
- ЁЯУе р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З ngrok (р╕Цр╣Йр╕▓р╣Др╕бр╣Ир╕бр╕╡)  
- ЁЯМР р╕кр╕гр╣Йр╕▓р╕З tunnel р╕кр╕│р╕лр╕гр╕▒р╕Ъ webhook
- ЁЯУЛ р╣Бр╕кр╕Фр╕З URL р╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╣Гр╕кр╣Ир╣Гр╕Щ LINE Console

### 3. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Гр╕Щ LINE Developers Console

1. р╣Ар╕Вр╣Йр╕▓ [LINE Developers Console](https://developers.line.biz/console/)
2. р╣Ар╕ер╕╖р╕нр╕Б Channel р╕Вр╕нр╕Зр╕Др╕╕р╕У
3. р╣Др╕Ыр╕Чр╕╡р╣И **Messaging API**
4. р╣Гр╕кр╣И **Webhook URL** р╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕Ир╕▓р╕Бр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣М
5. р╣Ар╕Ыр╕┤р╕Ф **Use webhook**
6. р╕Ыр╕┤р╕Ф **Auto-reply messages**

### 4. р╕Чр╕Фр╕кр╕нр╕Ъ

р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Юр╕╖р╣Ир╕нр╕Щ LINE Bot р╣Бр╕ер╣Йр╕зр╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б:
- `50 р╕Др╣Ир╕▓р╕Бр╕▓р╣Бр╕Я` - р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕гр╕▓р╕вр╕Ир╣Ир╕▓р╕в
- `р╕кр╕гр╕╕р╕Ы` - р╕Фр╕╣р╕кр╕гр╕╕р╕Ыр╕гр╕▓р╕вр╣Ар╕Фр╕╖р╕нр╕Щ  
- `р╕Кр╣Ир╕зр╕вр╣Ар╕лр╕ер╕╖р╕н` - р╕Фр╕╣р╕зр╕┤р╕Шр╕╡р╣Гр╕Кр╣Й

## ЁЯФз р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б

- **LINE_CHANNEL_SECRET**: р╣Др╕Фр╣Йр╕Ир╕▓р╕Б Basic settings
- **LINE_CHANNEL_ACCESS_TOKEN**: р╣Др╕Фр╣Йр╕Ир╕▓р╕Б Messaging API (р╕Бр╕Ф Issue)
- **QR Code**: р╕лр╕▓р╣Др╕Фр╣Йр╣Гр╕Щ Messaging API р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Гр╕лр╣Йр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Бр╕нр╕Фр╣Ар╕Юр╕╖р╣Ир╕нр╕Щ

## ЁЯЖШ р╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓

### Bot р╣Др╕бр╣Ир╕Хр╕нр╕Ъ?
1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Webhook URL р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕Зр╣Др╕лр╕б
2. р╕Фр╕╣ log р╣Гр╕Щ terminal р╕Чр╕╡р╣Ир╕гр╕▒р╕Щ `npm run dev`
3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ ngrok р╕вр╕▒р╕Зр╕Чр╕│р╕Зр╕▓р╕Щр╕нр╕вр╕╣р╣Ир╣Др╕лр╕б (`curl localhost:4040/api/tunnels`)
4. р╕гр╕▒р╕Щ `npm run test-webhook` р╣Ар╕Юр╕╖р╣Ир╕нр╕Чр╕Фр╕кр╕нр╕Ъ

### Signature error?
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ LINE_CHANNEL_SECRET р╣Гр╕Щ `.env.local`
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Webhook URL р╣Гр╕Щ LINE Console
- Status 401 р╣Гр╕Щр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕Ыр╣Зр╕Щр╣Ар╕гр╕╖р╣Ир╕нр╕Зр╕Ыр╕Бр╕Хр╕┤ (signature validation)

### Database error?
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ DATABASE_URL р╣Гр╕Щ `.env.local`
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н Supabase

## ЁЯЫа р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Чр╕╡р╣Ир╕бр╕╡р╕Ыр╕гр╕░р╣Вр╕вр╕Кр╕Щр╣М

```bash
npm run dev          # р╕гр╕▒р╕Щр╣Бр╕нр╕Ы
npm run test-webhook # р╕Чр╕Фр╕кр╕нр╕Ъ webhook
npm run test-line-bot # р╕Чр╕Фр╕кр╕нр╕Ъ LINE Bot
npm run setup-line   # р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ ngrok
npm run build        # build р╕кр╕│р╕лр╕гр╕▒р╕Ъ production
```

---

ЁЯОЙ **р╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з!** р╕Хр╕нр╕Щр╕Щр╕╡р╣Йр╕Др╕╕р╕Ур╕бр╕╡ LINE Bot р╕Чр╕╡р╣Ир╕Щр╣Ир╕▓р╕гр╕▒р╕Бр╣Бр╕ер╣Йр╕з! ЁЯР╛
