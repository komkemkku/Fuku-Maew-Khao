# Daily Notifications & Sticker Response Features

## ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô Fukuneko App:

1. **Daily Notifications** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô
2. **Sticker Response** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡πÜ
3. **Media Message Handling** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û, ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠, ‡πÄ‡∏™‡∏µ‡∏¢‡∏á

## üåÖ Daily Notifications

### ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å

#### Morning Greeting (‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤)
- **‡πÄ‡∏ß‡∏•‡∏≤**: ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 08:00 ‡∏ô.
- **‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤**: 
  - ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡∏™‡∏∏‡πà‡∏°
  - ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏à‡∏≤‡∏Å FortuneService
  - Tips ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- **‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö**: ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 30 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤

#### Evening Digest (‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô)
- **‡πÄ‡∏ß‡∏•‡∏≤**: ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 20:00 ‡∏ô.
- **‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤**:
  - ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
  - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
  - ‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥
  - ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ï‡∏≠‡∏ô‡πÄ‡∏¢‡πá‡∏ô
- **‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö**: ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

#### Weekly Budget Reminder (‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)
- **‡πÄ‡∏ß‡∏•‡∏≤**: ‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡πÄ‡∏ß‡∏•‡∏≤ 18:00 ‡∏ô.
- **‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤**:
  - ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
  - ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢
  - ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì
- **‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö**: ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì

### ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤

#### Environment Variables
```env
# API Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô cron jobs
CRON_API_KEY=your_secret_cron_key

# LINE Bot Configuration (‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß)
LINE_CHANNEL_ACCESS_TOKEN=your_channel_access_token
LINE_CHANNEL_SECRET=your_channel_secret
```

#### Cron Job URLs
```bash
# Morning Greeting (08:00 daily)
POST /api/notifications?action=morning
Header: x-api-key: your_secret_cron_key

# Evening Digest (20:00 daily)  
POST /api/notifications?action=evening
Header: x-api-key: your_secret_cron_key

# Weekly Budget Reminder (Sunday 18:00)
POST /api/notifications?action=weekly
Header: x-api-key: your_secret_cron_key
```

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

#### ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
```bash
# Morning message
POST /api/notifications?action=test&userId=LINE_USER_ID&type=morning

# Evening message
POST /api/notifications?action=test&userId=LINE_USER_ID&type=evening

# Weekly message
POST /api/notifications?action=test&userId=LINE_USER_ID&type=weekly
```

#### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
```bash
GET /api/notifications?action=status
```

## üò∏ Sticker Response

### ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å

#### ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö
1. **Standard Response** - ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ + tips
2. **Special Response** - ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° + ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏à‡∏≤‡∏Å FortuneService (30% ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™)
3. **Sticker Reply** - ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° + ‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö (20% ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™)

#### ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå
- **Love** ‚ù§Ô∏è - ‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å/‡∏´‡∏±‡∏ß‡πÉ‡∏à
- **Happy** üòä - ‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç/‡∏¢‡∏¥‡πâ‡∏°
- **Sad** üò¢ - ‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏®‡∏£‡πâ‡∏≤/‡∏£‡πâ‡∏≠‡∏á‡πÑ‡∏´‡πâ
- **Angry** üò† - ‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏Å‡∏£‡∏ò/‡∏´‡∏á‡∏∏‡∏î‡∏´‡∏á‡∏¥‡∏î
- **Surprise** üòÆ - ‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏´‡∏•‡∏≤‡∏î‡πÉ‡∏à
- **Sleepy** üò¥ - ‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏ô‡∏≠‡∏ô/‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢
- **Food** üçΩÔ∏è - ‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£
- **Work** üíº - ‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- **General** - ‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ

#### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö

**Love Sticker**:
```
üòª ‡∏≠‡πä‡∏≤aaa‡∏≤ ‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏à‡∏±‡∏á! ‡∏ü‡∏π‡∏Å‡∏∏‡∏£‡∏±‡∏Å‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢~ üíï

üí° Tip: ‡∏û‡∏¥‡∏°‡∏û‡πå '‡∏™‡∏£‡∏∏‡∏õ' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏ô‡∏∞
```

**Sad Sticker**:
```
ü•∫ ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏ô‡∏∞ ‡∏ü‡∏π‡∏Å‡∏∏‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ ‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏™‡πÄ‡∏™‡∏°‡∏≠...

üîÆ ‡πÅ‡∏°‡∏ß‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤...
üåà ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÉ‡∏´‡∏ç‡πà‡πÜ ‡∏ô‡πâ‡∏≠‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á

‡∏à‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡∏î‡∏µ‡πÜ ‡∏ô‡∏µ‡πâ‡πÑ‡∏ß‡πâ! ‚ú®
```

## üì± Media Message Handling

### ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö
- **Image** üì∏ - ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
- **Video** üé¨ - ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠
- **Audio** üéµ - ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á
- **File** üìé - ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
- **Location** üìç - ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö

**Image**:
```
üì∏ ‡∏£‡∏π‡∏õ‡∏™‡∏ß‡∏¢‡∏°‡∏≤‡∏Å! ‡∏ü‡∏π‡∏Å‡∏∏‡∏ä‡∏≠‡∏ö‡πÄ‡∏•‡∏¢~ ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏î‡∏µ‡πÜ ‡πÑ‡∏ß‡πâ‡∏ô‡∏∞

üí° ‡∏û‡∏¥‡∏°‡∏û‡πå '‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ü‡∏π‡∏Å‡∏∏‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏ô‡∏∞!
```

## üîß Implementation Details

### Database Methods ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

#### DatabaseService
```typescript
// ‡∏î‡∏∂‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
static async getAllUsers(): Promise<User[]>

// ‡∏î‡∏∂‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
static async getActiveUsers(daysBack: number): Promise<User[]>
```

### Services ‡πÉ‡∏´‡∏°‡πà

#### DailyNotificationService
```typescript
// ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡πâ‡∏≤
static async sendMorningGreeting(): Promise<void>

// ‡∏™‡πà‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ï‡∏≠‡∏ô‡πÄ‡∏¢‡πá‡∏ô
static async sendEveningDigest(): Promise<void>

// ‡∏™‡πà‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
static async sendWeeklyBudgetReminder(): Promise<void>

// ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö
static async sendTestMessage(userId: string, type: 'morning' | 'evening' | 'weekly'): Promise<void>
```

#### StickerResponseService
```typescript
// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå
static createStickerResponse(packageId?: string, stickerId?: string): Message[]

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏ö‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢)
static createSpecialStickerResponse(packageId?: string, stickerId?: string): Message[]

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå
static createStickerReplyWithSticker(packageId?: string, stickerId?: string): Message[]
```

### LineService Methods ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
```typescript
// ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå
static handleStickerMessage(packageId: string, stickerId: string): Message[]

// ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ media messages
static handleMediaMessage(messageType: string): Message[]
```

## üöÄ Deployment

### Vercel Cron Jobs

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `vercel.json`:
```json
{
  "crons": [
    {
      "path": "/api/notifications?action=morning",
      "schedule": "0 8 * * *"
    },
    {
      "path": "/api/notifications?action=evening", 
      "schedule": "0 20 * * *"
    },
    {
      "path": "/api/notifications?action=weekly",
      "schedule": "0 18 * * 0"
    }
  ]
}
```

### External Cron Services

#### EasyCron
```bash
# Morning - 08:00 daily
curl -X POST "https://your-domain.com/api/notifications?action=morning" \
  -H "x-api-key: your_secret_cron_key"

# Evening - 20:00 daily
curl -X POST "https://your-domain.com/api/notifications?action=evening" \
  -H "x-api-key: your_secret_cron_key"

# Weekly - Sunday 18:00
curl -X POST "https://your-domain.com/api/notifications?action=weekly" \
  -H "x-api-key: your_secret_cron_key"
```

## üìä Analytics & Monitoring

### Logs ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
```typescript
console.log('üåÖ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤...');
console.log(`‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡πâ‡∏≤‡πÉ‡∏´‡πâ ${user.display_name} ‡πÅ‡∏•‡πâ‡∏ß`);
console.log('üéâ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô');
```

### Error Handling
- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ rate limiting ‡∏Ç‡∏≠‡∏á LINE API
- Retry mechanism ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö failed deliveries
- Graceful fallback ‡πÄ‡∏°‡∏∑‡πà‡∏≠ database error

## üîç Testing

### Unit Tests
```bash
# Test sticker response
npm run test:sticker-response

# Test daily notifications
npm run test:daily-notifications

# Test media handling
npm run test:media-handling
```

### Manual Testing
```bash
# Test morning message
curl -X POST "http://localhost:3000/api/notifications?action=test&userId=YOUR_LINE_USER_ID&type=morning"

# Test sticker response
# ‡∏™‡πà‡∏á‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏ú‡πà‡∏≤‡∏ô LINE app ‡πÅ‡∏•‡∏∞‡∏î‡∏π response
```

## üéØ Future Enhancements

### Phase 1
- [ ] Personalized notification timing
- [ ] User preferences for notification types
- [ ] Rich message templates

### Phase 2
- [ ] Machine learning ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö better sticker classification
- [ ] Custom sticker responses per user
- [ ] Voice message handling

### Phase 3
- [ ] Multi-language support
- [ ] Advanced analytics dashboard
- [ ] AI-powered financial advice

## üõü Support

### Common Issues

**Q: ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥**
A: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:
1. Cron jobs ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
2. User ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô active users list ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
3. LINE Bot permissions ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

**Q: Sticker response ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô**
A: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:
1. Webhook configuration
2. StickerResponseService import ‡πÉ‡∏ô LineService
3. Console logs ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö error messages

**Q: Performance issues**
A: ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤:
1. Batch processing ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö large user base
2. Queue system ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö notification delivery
3. Database indexing ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö active users query
