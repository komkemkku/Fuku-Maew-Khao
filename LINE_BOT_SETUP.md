# üê± ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE Bot ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ü‡∏π‡∏Å‡∏∏‡πÅ‡∏°‡∏ß‡∏Ç‡∏≤‡∏ß

## üìã ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ LINE Bot

### 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á LINE Bot Channel

1. ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà [LINE Developers Console](https://developers.line.biz/console/)
2. ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ LINE ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
3. ‡∏™‡∏£‡πâ‡∏≤‡∏á Provider ‡πÉ‡∏´‡∏°‡πà (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)
4. ‡∏Ñ‡∏•‡∏¥‡∏Å **Create a Messaging API channel**

### 2. ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Channel

```
Channel name: ‡∏ü‡∏π‡∏Å‡∏∏‡πÅ‡∏°‡∏ß‡∏Ç‡∏≤‡∏ß - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß
Description: ‡πÅ‡∏≠‡∏õ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏°‡∏ß‡∏ô‡πâ‡∏≠‡∏¢‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏π‡πÅ‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
Category: Finance
Subcategory: Personal Finance
```

### 3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Webhook

#### URL ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Development:
```
https://your-ngrok-url.ngrok.io/api/webhook
```

#### URL ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Production (Vercel):
```
https://your-app-name.vercel.app/api/webhook
```

> **üìù ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Vercel, URL ‡∏à‡∏∞‡∏°‡∏µ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö `https://project-name-git-branch-username.vercel.app/api/webhook`

### 4. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

#### ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:
- **Use webhook**: ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î
- **Allow bot to join group chats**: ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
- **Auto-reply messages**: ‚ùå ‡∏õ‡∏¥‡∏î
- **Greeting messages**: ‚úÖ ‡πÄ‡∏õ‡∏¥‡∏î

#### üîë ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å:
- **Channel Secret**: ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Basic settings
- **Channel Access Token**: ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Messaging API (‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏î Issue ‡∏Å‡πà‡∏≠‡∏ô)

### 5. ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ ngrok (Development)

```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á ngrok
npm install -g ngrok

# ‡πÄ‡∏£‡∏¥‡πà‡∏° tunnel
ngrok http 3002

# ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å URL ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ ‡πÄ‡∏ä‡πà‡∏ô https://abc123.ngrok.io
# ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà‡πÉ‡∏ô LINE Console: https://abc123.ngrok.io/api/webhook
```

### 6. ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà Bot ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö

#### üìù ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢:
```
"‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß 50"
"‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô 500 ‡∏ö‡∏≤‡∏ó"  
"‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á 150"
"‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü 800 ‡∏ö‡∏≤‡∏ó"
```

#### üìä ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥:
```
"‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥"
"‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°"
"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô"
```

#### ‚ùì ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠:
```
"‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠"
"help"
"‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ"
```

### 7. QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á Channel ‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ QR Code ‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô

### 8. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Rich Menu (‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)

```json
{
  "size": {
    "width": 2500,
    "height": 1686
  },
  "selected": false,
  "name": "‡∏ü‡∏π‡∏Å‡∏∏‡πÅ‡∏°‡∏ß‡∏Ç‡∏≤‡∏ß Menu",
  "chatBarText": "‡πÄ‡∏°‡∏ô‡∏π",
  "areas": [
    {
      "bounds": {
        "x": 0,
        "y": 0,
        "width": 833,
        "height": 843
      },
      "action": {
        "type": "message",
        "text": "‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥"
      }
    },
    {
      "bounds": {
        "x": 834,
        "y": 0,
        "width": 833,
        "height": 843
      },
      "action": {
        "type": "message",
        "text": "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢"
      }
    },
    {
      "bounds": {
        "x": 1667,
        "y": 0,
        "width": 833,
        "height": 843
      },
      "action": {
        "type": "uri",
        "uri": "https://your-domain.com/dashboard"
      }
    }
  ]
}
```

## üîß ‡∏Å‡∏≤‡∏£ Troubleshooting

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢:

1. **Bot ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Webhook URL
   - ‡∏î‡∏π Console log ‡πÉ‡∏ô browser developer tools
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ngrok ‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°

2. **Signature validation failed**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Channel Secret ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏´‡∏°
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö environment variables

3. **Database connection error**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö DATABASE_URL
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Supabase

### ‡∏Å‡∏≤‡∏£‡∏î‡∏π Log:

```bash
# ‡∏î‡∏π log ‡∏à‡∏≤‡∏Å terminal ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô Next.js
npm run dev

# ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏π‡πÉ‡∏ô browser console
# ‡πÄ‡∏õ‡∏¥‡∏î Network tab ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π webhook requests
```

## üéØ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ

### Development:
1. ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á LINE Channel
2. ‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Webhook URL ‡∏î‡πâ‡∏ß‡∏¢ ngrok
3. ‚úÖ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°

### Production (Vercel):
1. üöÄ Deploy ‡∏ö‡∏ô Vercel
2. ‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables
3. üîó ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Webhook URL ‡πÉ‡∏ô LINE Console
4. üîÑ ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á Rich Menu
5. üîÑ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡πÉ‡∏´‡∏°‡πà‡πÜ

## üöÄ ‡∏Å‡∏≤‡∏£ Deploy ‡∏ö‡∏ô Vercel

### 1. ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ
```bash
# ‡∏™‡∏£‡πâ‡∏≤‡∏á production build
npm run build

# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ build ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
npm run start
```

### 2. Deploy ‡∏ú‡πà‡∏≤‡∏ô Vercel CLI
```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Vercel CLI
npm i -g vercel

# Login ‡πÄ‡∏Ç‡πâ‡∏≤ Vercel
vercel login

# Deploy ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ
vercel --prod
```

### 3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment Variables ‡πÉ‡∏ô Vercel
‡πÑ‡∏õ‡∏ó‡∏µ‡πà Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables

```
LINE_CHANNEL_ACCESS_TOKEN = ‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å LINE Console
LINE_CHANNEL_SECRET = ‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å LINE Console  
DATABASE_URL = ‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å Supabase
```

### 4. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Webhook URL
‡πÉ‡∏ô LINE Developers Console ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Webhook URL ‡πÄ‡∏õ‡πá‡∏ô:
```
https://your-project.vercel.app/api/webhook
```

### 5. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Production
```bash
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö webhook ‡∏ö‡∏ô production
curl -X POST https://your-project.vercel.app/api/webhook \
  -H "Content-Type: application/json" \
  -H "x-line-signature: test" \
  -d '{"events":[]}'
```

## üîß ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ö‡∏ô Vercel

### 1. Function Timeout
‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô `vercel.json`:
```json
{
  "functions": {
    "app/api/webhook/route.ts": {
      "maxDuration": 30
    }
  }
}
```

### 2. Environment Variables ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô Vercel Dashboard ‡πÅ‡∏•‡πâ‡∏ß
- Redeploy ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏° env vars
- ‡πÉ‡∏ä‡πâ `vercel env pull` ‡πÄ‡∏û‡∏∑‡πà‡∏≠ sync local env

### 3. Database Connection Error
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö DATABASE_URL format ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö serverless
- ‡πÉ‡∏ä‡πâ connection pooling (‡πÄ‡∏ä‡πà‡∏ô Supabase Pooler)
- ‡πÄ‡∏û‡∏¥‡πà‡∏° SSL configuration ‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

### 4. Cold Start Issues
- Vercel serverless functions ‡∏°‡∏µ cold start
- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏£‡∏Å‡∏≠‡∏≤‡∏à‡∏ï‡∏≠‡∏ö‡∏ä‡πâ‡∏≤ (‡∏õ‡∏Å‡∏ï‡∏¥)
- ‡πÉ‡∏ä‡πâ warming strategies ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

## üì± ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

```
‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: "‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß 50"
Bot: "üê± ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ '‡∏≠‡∏≤‡∏´‡∏≤‡∏£' ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 50 ‡∏ö‡∏≤‡∏ó ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞!"

‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: "‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥"  
Bot: "üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ:
üí∞ ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ: 250 ‡∏ö‡∏≤‡∏ó
üìà ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ: 5,500 ‡∏ö‡∏≤‡∏ó
üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 1,500 ‡∏ö‡∏≤‡∏ó"
```

---

üéâ **‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!** ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ LINE Bot ‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!
